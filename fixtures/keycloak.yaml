---
version: 1
interactions:
- request:
    body: client_id=test-client&client_secret=change-me&grant_type=client_credentials
    form:
      client_id:
      - test-client
      client_secret:
      - change-me
      grant_type:
      - client_credentials
    headers:
      Content-Type:
      - application/x-www-form-urlencoded
    url: http://localhost:8080/realms/test-realm/protocol/openid-connect/token
    method: POST
  response:
    body: '{"access_token":"eyJhbGciOiJSUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICJpaUQzelJxQWtqY3RXbkM5U0lnbFZ2bXZSR1VlZm84R1B1ejNXdnRLQUVVIn0.eyJleHAiOjE2NjA0Nzc5ODEsImlhdCI6MTY2MDQ3NzY4MSwianRpIjoiNDRkODU4YTctMDg0ZS00YzhiLTkzYzctOGU3MDQ5MTNmZDAwIiwiaXNzIjoiaHR0cDovL2xvY2FsaG9zdDo4MDgwL3JlYWxtcy90ZXN0LXJlYWxtIiwiYXVkIjoiYWNjb3VudCIsInN1YiI6ImExY2Q3YjdhLTIwNzQtNGYzZS05MTY2LWVkZjNlYmI4OTc1NCIsInR5cCI6IkJlYXJlciIsImF6cCI6InRlc3QtY2xpZW50IiwiYWNyIjoiMSIsInJlYWxtX2FjY2VzcyI6eyJyb2xlcyI6WyJkZWZhdWx0LXJvbGVzLXRlc3QtcmVhbG0iLCJvZmZsaW5lX2FjY2VzcyIsInVtYV9hdXRob3JpemF0aW9uIl19LCJyZXNvdXJjZV9hY2Nlc3MiOnsidGVzdC1jbGllbnQiOnsicm9sZXMiOlsidW1hX3Byb3RlY3Rpb24iXX0sImFjY291bnQiOnsicm9sZXMiOlsibWFuYWdlLWFjY291bnQiLCJtYW5hZ2UtYWNjb3VudC1saW5rcyIsInZpZXctcHJvZmlsZSJdfX0sInNjb3BlIjoiZW1haWwgcHJvZmlsZSIsImNsaWVudEhvc3QiOiIxNzIuMzAuMC4xIiwiZW1haWxfdmVyaWZpZWQiOmZhbHNlLCJjbGllbnRJZCI6InRlc3QtY2xpZW50IiwicHJlZmVycmVkX3VzZXJuYW1lIjoic2VydmljZS1hY2NvdW50LXRlc3QtY2xpZW50IiwiY2xpZW50QWRkcmVzcyI6IjE3Mi4zMC4wLjEifQ.FL7oxMFaTzd44ezTWOLh-lbUiYQUhqk4UIguJHKAVyC2Va7AoVAqITTxhN7hMbuwVXJJtOJgxdbnuucpUhxiaBZl7zDjARSCkNr2__WttxIg1fWmebNGE8YGZ1u9zqrpYytZl1GLqHeKz8QJQ6J_o8tXOsUBKUfc0LsFf28GeIJ8W1zaDMKVVM_7rWhcV8wbwxSTK9WfEcQGyqzMIyyA6AbGAQ1jixT9FZEbKiiceJptYkS7cf7gJOdui0ON0dfEmfAbZgaaZyL5IVHWibZWoZy_mLHqmw_zJFFdtvqfP9FqJOi4kGkBU6zLMJy9llgTY1PojBQ73n223NkpYSzLYQ","expires_in":300,"refresh_expires_in":0,"token_type":"Bearer","not-before-policy":0,"scope":"email
      profile"}'
    headers:
      Cache-Control:
      - no-store
      Content-Length:
      - "1440"
      Content-Type:
      - application/json
      Pragma:
      - no-cache
      Referrer-Policy:
      - no-referrer
      Set-Cookie:
      - KC_RESTART=; Version=1; Expires=Thu, 01-Jan-1970 00:00:10 GMT; Max-Age=0;
        Path=/realms/test-realm/; HttpOnly
      Strict-Transport-Security:
      - max-age=31536000; includeSubDomains
      X-Content-Type-Options:
      - nosniff
      X-Frame-Options:
      - SAMEORIGIN
      X-Xss-Protection:
      - 1; mode=block
    status: 200 OK
    code: 200
    duration: 328.799566ms
- request:
    body: '{"type":"users","icon_uri":"https://example.com/rsrcs/users.png","resource_scopes":["list"],"name":"Users","uri":"http://127.0.0.1:52967/base/users"}'
    form: {}
    headers:
      Authorization:
      - Bearer eyJhbGciOiJSUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICJpaUQzelJxQWtqY3RXbkM5U0lnbFZ2bXZSR1VlZm84R1B1ejNXdnRLQUVVIn0.eyJleHAiOjE2NjA0Nzc5ODEsImlhdCI6MTY2MDQ3NzY4MSwianRpIjoiNDRkODU4YTctMDg0ZS00YzhiLTkzYzctOGU3MDQ5MTNmZDAwIiwiaXNzIjoiaHR0cDovL2xvY2FsaG9zdDo4MDgwL3JlYWxtcy90ZXN0LXJlYWxtIiwiYXVkIjoiYWNjb3VudCIsInN1YiI6ImExY2Q3YjdhLTIwNzQtNGYzZS05MTY2LWVkZjNlYmI4OTc1NCIsInR5cCI6IkJlYXJlciIsImF6cCI6InRlc3QtY2xpZW50IiwiYWNyIjoiMSIsInJlYWxtX2FjY2VzcyI6eyJyb2xlcyI6WyJkZWZhdWx0LXJvbGVzLXRlc3QtcmVhbG0iLCJvZmZsaW5lX2FjY2VzcyIsInVtYV9hdXRob3JpemF0aW9uIl19LCJyZXNvdXJjZV9hY2Nlc3MiOnsidGVzdC1jbGllbnQiOnsicm9sZXMiOlsidW1hX3Byb3RlY3Rpb24iXX0sImFjY291bnQiOnsicm9sZXMiOlsibWFuYWdlLWFjY291bnQiLCJtYW5hZ2UtYWNjb3VudC1saW5rcyIsInZpZXctcHJvZmlsZSJdfX0sInNjb3BlIjoiZW1haWwgcHJvZmlsZSIsImNsaWVudEhvc3QiOiIxNzIuMzAuMC4xIiwiZW1haWxfdmVyaWZpZWQiOmZhbHNlLCJjbGllbnRJZCI6InRlc3QtY2xpZW50IiwicHJlZmVycmVkX3VzZXJuYW1lIjoic2VydmljZS1hY2NvdW50LXRlc3QtY2xpZW50IiwiY2xpZW50QWRkcmVzcyI6IjE3Mi4zMC4wLjEifQ.FL7oxMFaTzd44ezTWOLh-lbUiYQUhqk4UIguJHKAVyC2Va7AoVAqITTxhN7hMbuwVXJJtOJgxdbnuucpUhxiaBZl7zDjARSCkNr2__WttxIg1fWmebNGE8YGZ1u9zqrpYytZl1GLqHeKz8QJQ6J_o8tXOsUBKUfc0LsFf28GeIJ8W1zaDMKVVM_7rWhcV8wbwxSTK9WfEcQGyqzMIyyA6AbGAQ1jixT9FZEbKiiceJptYkS7cf7gJOdui0ON0dfEmfAbZgaaZyL5IVHWibZWoZy_mLHqmw_zJFFdtvqfP9FqJOi4kGkBU6zLMJy9llgTY1PojBQ73n223NkpYSzLYQ
      Content-Type:
      - application/json
    url: http://localhost:8080/realms/test-realm/authz/protection/resource_set
    method: POST
  response:
    body: '{"name":"Users","type":"users","owner":{"id":"bf93754f-2719-4c06-a2da-d1e95c5b9e54","name":"test-client"},"ownerManagedAccess":false,"_id":"e9131a9a-9b37-499b-b4b2-312a6c1ab44b","uris":["http://127.0.0.1:52967/base/users"],"resource_scopes":[{"id":"debe67d4-24ac-4210-b866-3c7b858d75c9","name":"list"}],"scopes":[{"id":"debe67d4-24ac-4210-b866-3c7b858d75c9","name":"list"}],"icon_uri":"https://example.com/rsrcs/users.png"}'
    headers:
      Content-Length:
      - "423"
      Content-Type:
      - application/json
      Referrer-Policy:
      - no-referrer
      Strict-Transport-Security:
      - max-age=31536000; includeSubDomains
      X-Content-Type-Options:
      - nosniff
      X-Frame-Options:
      - SAMEORIGIN
      X-Xss-Protection:
      - 1; mode=block
    status: 201 Created
    code: 201
    duration: 89.723192ms
- request:
    body: '{"type":"user","icon_uri":"https://example.com/rsrcs/user.png","resource_scopes":["read","write"],"name":"User
      123","uri":"http://127.0.0.1:52967/base/users/123"}'
    form: {}
    headers:
      Authorization:
      - Bearer eyJhbGciOiJSUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICJpaUQzelJxQWtqY3RXbkM5U0lnbFZ2bXZSR1VlZm84R1B1ejNXdnRLQUVVIn0.eyJleHAiOjE2NjA0Nzc5ODEsImlhdCI6MTY2MDQ3NzY4MSwianRpIjoiNDRkODU4YTctMDg0ZS00YzhiLTkzYzctOGU3MDQ5MTNmZDAwIiwiaXNzIjoiaHR0cDovL2xvY2FsaG9zdDo4MDgwL3JlYWxtcy90ZXN0LXJlYWxtIiwiYXVkIjoiYWNjb3VudCIsInN1YiI6ImExY2Q3YjdhLTIwNzQtNGYzZS05MTY2LWVkZjNlYmI4OTc1NCIsInR5cCI6IkJlYXJlciIsImF6cCI6InRlc3QtY2xpZW50IiwiYWNyIjoiMSIsInJlYWxtX2FjY2VzcyI6eyJyb2xlcyI6WyJkZWZhdWx0LXJvbGVzLXRlc3QtcmVhbG0iLCJvZmZsaW5lX2FjY2VzcyIsInVtYV9hdXRob3JpemF0aW9uIl19LCJyZXNvdXJjZV9hY2Nlc3MiOnsidGVzdC1jbGllbnQiOnsicm9sZXMiOlsidW1hX3Byb3RlY3Rpb24iXX0sImFjY291bnQiOnsicm9sZXMiOlsibWFuYWdlLWFjY291bnQiLCJtYW5hZ2UtYWNjb3VudC1saW5rcyIsInZpZXctcHJvZmlsZSJdfX0sInNjb3BlIjoiZW1haWwgcHJvZmlsZSIsImNsaWVudEhvc3QiOiIxNzIuMzAuMC4xIiwiZW1haWxfdmVyaWZpZWQiOmZhbHNlLCJjbGllbnRJZCI6InRlc3QtY2xpZW50IiwicHJlZmVycmVkX3VzZXJuYW1lIjoic2VydmljZS1hY2NvdW50LXRlc3QtY2xpZW50IiwiY2xpZW50QWRkcmVzcyI6IjE3Mi4zMC4wLjEifQ.FL7oxMFaTzd44ezTWOLh-lbUiYQUhqk4UIguJHKAVyC2Va7AoVAqITTxhN7hMbuwVXJJtOJgxdbnuucpUhxiaBZl7zDjARSCkNr2__WttxIg1fWmebNGE8YGZ1u9zqrpYytZl1GLqHeKz8QJQ6J_o8tXOsUBKUfc0LsFf28GeIJ8W1zaDMKVVM_7rWhcV8wbwxSTK9WfEcQGyqzMIyyA6AbGAQ1jixT9FZEbKiiceJptYkS7cf7gJOdui0ON0dfEmfAbZgaaZyL5IVHWibZWoZy_mLHqmw_zJFFdtvqfP9FqJOi4kGkBU6zLMJy9llgTY1PojBQ73n223NkpYSzLYQ
      Content-Type:
      - application/json
    url: http://localhost:8080/realms/test-realm/authz/protection/resource_set
    method: POST
  response:
    body: '{"name":"User 123","type":"user","owner":{"id":"bf93754f-2719-4c06-a2da-d1e95c5b9e54","name":"test-client"},"ownerManagedAccess":false,"_id":"fdeaff3a-80db-4fc1-b56e-afdacdb4142b","uris":["http://127.0.0.1:52967/base/users/123"],"resource_scopes":[{"id":"2d35268c-c3a6-4a7d-8ad0-310649fb967d","name":"read"},{"id":"7b30bd1d-a645-4b4c-bc89-90a709a5bfe0","name":"write"}],"scopes":[{"id":"2d35268c-c3a6-4a7d-8ad0-310649fb967d","name":"read"},{"id":"7b30bd1d-a645-4b4c-bc89-90a709a5bfe0","name":"write"}],"icon_uri":"https://example.com/rsrcs/user.png"}'
    headers:
      Content-Length:
      - "550"
      Content-Type:
      - application/json
      Referrer-Policy:
      - no-referrer
      Strict-Transport-Security:
      - max-age=31536000; includeSubDomains
      X-Content-Type-Options:
      - nosniff
      X-Frame-Options:
      - SAMEORIGIN
      X-Xss-Protection:
      - 1; mode=block
    status: 201 Created
    code: 201
    duration: 29.08674ms
