---
version: 1
interactions:
- request:
    body: client_id=test-client&client_secret=change-me&grant_type=client_credentials
    form:
      client_id:
      - test-client
      client_secret:
      - change-me
      grant_type:
      - client_credentials
    headers:
      Content-Type:
      - application/x-www-form-urlencoded
    url: http://localhost:8080/realms/test-realm/protocol/openid-connect/token
    method: POST
  response:
    body: '{"access_token":"eyJhbGciOiJSUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICJ0Z1JnV212NmtyTFJjRDA3cXk1eThGd2JmcDZTNGl4RGI1SDI3NGdNQzdRIn0.eyJleHAiOjE2NjA1MjUyMzUsImlhdCI6MTY2MDUyNDkzNSwianRpIjoiOTM0ZmVjOWUtNzc5NS00YWVhLTliMmMtMjE0NzNkNjI2MmVmIiwiaXNzIjoiaHR0cDovL2xvY2FsaG9zdDo4MDgwL3JlYWxtcy90ZXN0LXJlYWxtIiwiYXVkIjoiYWNjb3VudCIsInN1YiI6ImExY2Q3YjdhLTIwNzQtNGYzZS05MTY2LWVkZjNlYmI4OTc1NCIsInR5cCI6IkJlYXJlciIsImF6cCI6InRlc3QtY2xpZW50IiwiYWNyIjoiMSIsInJlYWxtX2FjY2VzcyI6eyJyb2xlcyI6WyJkZWZhdWx0LXJvbGVzLXRlc3QtcmVhbG0iLCJvZmZsaW5lX2FjY2VzcyIsInVtYV9hdXRob3JpemF0aW9uIl19LCJyZXNvdXJjZV9hY2Nlc3MiOnsidGVzdC1jbGllbnQiOnsicm9sZXMiOlsidW1hX3Byb3RlY3Rpb24iXX0sImFjY291bnQiOnsicm9sZXMiOlsibWFuYWdlLWFjY291bnQiLCJtYW5hZ2UtYWNjb3VudC1saW5rcyIsInZpZXctcHJvZmlsZSJdfX0sInNjb3BlIjoiZW1haWwgcHJvZmlsZSIsImNsaWVudEhvc3QiOiIxNzIuMzAuMC4xIiwiZW1haWxfdmVyaWZpZWQiOmZhbHNlLCJjbGllbnRJZCI6InRlc3QtY2xpZW50IiwicHJlZmVycmVkX3VzZXJuYW1lIjoic2VydmljZS1hY2NvdW50LXRlc3QtY2xpZW50IiwiY2xpZW50QWRkcmVzcyI6IjE3Mi4zMC4wLjEifQ.R2_JHeYdW-P8yX1jt2KUE3-jRLS6UFtcPtxmAe_oDbj00UvKIfMlj6JNi9bitZBqH6wUPm3cG6umqfWoBTbQPlCrCp9zmjhwLGP3gVsbPS1lb7MdMCz7c0zkbsVx_m1a04qCziqY7r1Irnb4i8kUaYg9ZNwx8-PR0bnZpWYRV09Fa3OLHhCzW8zHhJfD4aPh_leRrQYjK38dHdb5ESzhgMAvKumYViNYvWeIrobc97XMqKliIrH1HkGE6tEVR_OdK6W4SMRQmKRJPZAGzGe-O10RTpxUiV4ms9IKfjBgo4Lz73z1Z3fLw8Yt1bZHm-Yv2QqK46ZgOLiFAF44dkuLQw","expires_in":300,"refresh_expires_in":0,"token_type":"Bearer","not-before-policy":0,"scope":"email
      profile"}'
    headers:
      Cache-Control:
      - no-store
      Content-Length:
      - "1440"
      Content-Type:
      - application/json
      Pragma:
      - no-cache
      Referrer-Policy:
      - no-referrer
      Set-Cookie:
      - KC_RESTART=; Version=1; Expires=Thu, 01-Jan-1970 00:00:10 GMT; Max-Age=0;
        Path=/realms/test-realm/; HttpOnly
      Strict-Transport-Security:
      - max-age=31536000; includeSubDomains
      X-Content-Type-Options:
      - nosniff
      X-Frame-Options:
      - SAMEORIGIN
      X-Xss-Protection:
      - 1; mode=block
    status: 200 OK
    code: 200
    duration: 352.550827ms
- request:
    body: '{"type":"users","icon_uri":"https://example.com/rsrcs/users.png","resource_scopes":["list"],"name":"Users","uri":"http://127.0.0.1:63451/base/users"}'
    form: {}
    headers:
      Authorization:
      - Bearer eyJhbGciOiJSUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICJ0Z1JnV212NmtyTFJjRDA3cXk1eThGd2JmcDZTNGl4RGI1SDI3NGdNQzdRIn0.eyJleHAiOjE2NjA1MjUyMzUsImlhdCI6MTY2MDUyNDkzNSwianRpIjoiOTM0ZmVjOWUtNzc5NS00YWVhLTliMmMtMjE0NzNkNjI2MmVmIiwiaXNzIjoiaHR0cDovL2xvY2FsaG9zdDo4MDgwL3JlYWxtcy90ZXN0LXJlYWxtIiwiYXVkIjoiYWNjb3VudCIsInN1YiI6ImExY2Q3YjdhLTIwNzQtNGYzZS05MTY2LWVkZjNlYmI4OTc1NCIsInR5cCI6IkJlYXJlciIsImF6cCI6InRlc3QtY2xpZW50IiwiYWNyIjoiMSIsInJlYWxtX2FjY2VzcyI6eyJyb2xlcyI6WyJkZWZhdWx0LXJvbGVzLXRlc3QtcmVhbG0iLCJvZmZsaW5lX2FjY2VzcyIsInVtYV9hdXRob3JpemF0aW9uIl19LCJyZXNvdXJjZV9hY2Nlc3MiOnsidGVzdC1jbGllbnQiOnsicm9sZXMiOlsidW1hX3Byb3RlY3Rpb24iXX0sImFjY291bnQiOnsicm9sZXMiOlsibWFuYWdlLWFjY291bnQiLCJtYW5hZ2UtYWNjb3VudC1saW5rcyIsInZpZXctcHJvZmlsZSJdfX0sInNjb3BlIjoiZW1haWwgcHJvZmlsZSIsImNsaWVudEhvc3QiOiIxNzIuMzAuMC4xIiwiZW1haWxfdmVyaWZpZWQiOmZhbHNlLCJjbGllbnRJZCI6InRlc3QtY2xpZW50IiwicHJlZmVycmVkX3VzZXJuYW1lIjoic2VydmljZS1hY2NvdW50LXRlc3QtY2xpZW50IiwiY2xpZW50QWRkcmVzcyI6IjE3Mi4zMC4wLjEifQ.R2_JHeYdW-P8yX1jt2KUE3-jRLS6UFtcPtxmAe_oDbj00UvKIfMlj6JNi9bitZBqH6wUPm3cG6umqfWoBTbQPlCrCp9zmjhwLGP3gVsbPS1lb7MdMCz7c0zkbsVx_m1a04qCziqY7r1Irnb4i8kUaYg9ZNwx8-PR0bnZpWYRV09Fa3OLHhCzW8zHhJfD4aPh_leRrQYjK38dHdb5ESzhgMAvKumYViNYvWeIrobc97XMqKliIrH1HkGE6tEVR_OdK6W4SMRQmKRJPZAGzGe-O10RTpxUiV4ms9IKfjBgo4Lz73z1Z3fLw8Yt1bZHm-Yv2QqK46ZgOLiFAF44dkuLQw
      Content-Type:
      - application/json
    url: http://localhost:8080/realms/test-realm/authz/protection/resource_set
    method: POST
  response:
    body: '{"name":"Users","type":"users","owner":{"id":"bf93754f-2719-4c06-a2da-d1e95c5b9e54","name":"test-client"},"ownerManagedAccess":false,"_id":"ea172824-74e0-4e55-89ff-72018f3de663","uris":["http://127.0.0.1:63451/base/users"],"resource_scopes":[{"id":"03cb2131-dcfb-458e-a399-79fd8302860e","name":"list"}],"scopes":[{"id":"03cb2131-dcfb-458e-a399-79fd8302860e","name":"list"}],"icon_uri":"https://example.com/rsrcs/users.png"}'
    headers:
      Content-Length:
      - "423"
      Content-Type:
      - application/json
      Referrer-Policy:
      - no-referrer
      Strict-Transport-Security:
      - max-age=31536000; includeSubDomains
      X-Content-Type-Options:
      - nosniff
      X-Frame-Options:
      - SAMEORIGIN
      X-Xss-Protection:
      - 1; mode=block
    status: 201 Created
    code: 201
    duration: 104.025693ms
- request:
    body: '{"type":"user","icon_uri":"https://example.com/rsrcs/user.png","resource_scopes":["read","write"],"name":"User
      123","uri":"http://127.0.0.1:63451/base/users/123"}'
    form: {}
    headers:
      Authorization:
      - Bearer eyJhbGciOiJSUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICJ0Z1JnV212NmtyTFJjRDA3cXk1eThGd2JmcDZTNGl4RGI1SDI3NGdNQzdRIn0.eyJleHAiOjE2NjA1MjUyMzUsImlhdCI6MTY2MDUyNDkzNSwianRpIjoiOTM0ZmVjOWUtNzc5NS00YWVhLTliMmMtMjE0NzNkNjI2MmVmIiwiaXNzIjoiaHR0cDovL2xvY2FsaG9zdDo4MDgwL3JlYWxtcy90ZXN0LXJlYWxtIiwiYXVkIjoiYWNjb3VudCIsInN1YiI6ImExY2Q3YjdhLTIwNzQtNGYzZS05MTY2LWVkZjNlYmI4OTc1NCIsInR5cCI6IkJlYXJlciIsImF6cCI6InRlc3QtY2xpZW50IiwiYWNyIjoiMSIsInJlYWxtX2FjY2VzcyI6eyJyb2xlcyI6WyJkZWZhdWx0LXJvbGVzLXRlc3QtcmVhbG0iLCJvZmZsaW5lX2FjY2VzcyIsInVtYV9hdXRob3JpemF0aW9uIl19LCJyZXNvdXJjZV9hY2Nlc3MiOnsidGVzdC1jbGllbnQiOnsicm9sZXMiOlsidW1hX3Byb3RlY3Rpb24iXX0sImFjY291bnQiOnsicm9sZXMiOlsibWFuYWdlLWFjY291bnQiLCJtYW5hZ2UtYWNjb3VudC1saW5rcyIsInZpZXctcHJvZmlsZSJdfX0sInNjb3BlIjoiZW1haWwgcHJvZmlsZSIsImNsaWVudEhvc3QiOiIxNzIuMzAuMC4xIiwiZW1haWxfdmVyaWZpZWQiOmZhbHNlLCJjbGllbnRJZCI6InRlc3QtY2xpZW50IiwicHJlZmVycmVkX3VzZXJuYW1lIjoic2VydmljZS1hY2NvdW50LXRlc3QtY2xpZW50IiwiY2xpZW50QWRkcmVzcyI6IjE3Mi4zMC4wLjEifQ.R2_JHeYdW-P8yX1jt2KUE3-jRLS6UFtcPtxmAe_oDbj00UvKIfMlj6JNi9bitZBqH6wUPm3cG6umqfWoBTbQPlCrCp9zmjhwLGP3gVsbPS1lb7MdMCz7c0zkbsVx_m1a04qCziqY7r1Irnb4i8kUaYg9ZNwx8-PR0bnZpWYRV09Fa3OLHhCzW8zHhJfD4aPh_leRrQYjK38dHdb5ESzhgMAvKumYViNYvWeIrobc97XMqKliIrH1HkGE6tEVR_OdK6W4SMRQmKRJPZAGzGe-O10RTpxUiV4ms9IKfjBgo4Lz73z1Z3fLw8Yt1bZHm-Yv2QqK46ZgOLiFAF44dkuLQw
      Content-Type:
      - application/json
    url: http://localhost:8080/realms/test-realm/authz/protection/resource_set
    method: POST
  response:
    body: '{"name":"User 123","type":"user","owner":{"id":"bf93754f-2719-4c06-a2da-d1e95c5b9e54","name":"test-client"},"ownerManagedAccess":false,"_id":"9ab05e9c-4532-426b-9794-2d5ea118d9c2","uris":["http://127.0.0.1:63451/base/users/123"],"resource_scopes":[{"id":"cdf47b2a-1fd7-44f3-8aa0-9fd91de6b65d","name":"read"},{"id":"0650e54b-abd0-4b99-b406-b4e7d41d9172","name":"write"}],"scopes":[{"id":"cdf47b2a-1fd7-44f3-8aa0-9fd91de6b65d","name":"read"},{"id":"0650e54b-abd0-4b99-b406-b4e7d41d9172","name":"write"}],"icon_uri":"https://example.com/rsrcs/user.png"}'
    headers:
      Content-Length:
      - "550"
      Content-Type:
      - application/json
      Referrer-Policy:
      - no-referrer
      Strict-Transport-Security:
      - max-age=31536000; includeSubDomains
      X-Content-Type-Options:
      - nosniff
      X-Frame-Options:
      - SAMEORIGIN
      X-Xss-Protection:
      - 1; mode=block
    status: 201 Created
    code: 201
    duration: 23.80674ms
