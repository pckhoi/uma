---
version: 1
interactions:
- request:
    body: ""
    form: {}
    headers: {}
    url: http://localhost:8080/realms/test-realm/.well-known/uma2-configuration
    method: GET
  response:
    body: '{"issuer":"http://localhost:8080/realms/test-realm","authorization_endpoint":"http://localhost:8080/realms/test-realm/protocol/openid-connect/auth","token_endpoint":"http://localhost:8080/realms/test-realm/protocol/openid-connect/token","introspection_endpoint":"http://localhost:8080/realms/test-realm/protocol/openid-connect/token/introspect","end_session_endpoint":"http://localhost:8080/realms/test-realm/protocol/openid-connect/logout","frontchannel_logout_session_supported":true,"frontchannel_logout_supported":true,"jwks_uri":"http://localhost:8080/realms/test-realm/protocol/openid-connect/certs","grant_types_supported":["authorization_code","implicit","refresh_token","password","client_credentials","urn:ietf:params:oauth:grant-type:device_code","urn:openid:params:grant-type:ciba"],"response_types_supported":["code","none","id_token","token","id_token
      token","code id_token","code token","code id_token token"],"response_modes_supported":["query","fragment","form_post","query.jwt","fragment.jwt","form_post.jwt","jwt"],"registration_endpoint":"http://localhost:8080/realms/test-realm/clients-registrations/openid-connect","token_endpoint_auth_methods_supported":["private_key_jwt","client_secret_basic","client_secret_post","tls_client_auth","client_secret_jwt"],"token_endpoint_auth_signing_alg_values_supported":["PS384","ES384","RS384","HS256","HS512","ES256","RS256","HS384","ES512","PS256","PS512","RS512"],"scopes_supported":["openid","roles","acr","email","microprofile-jwt","offline_access","phone","web-origins","address","profile"],"resource_registration_endpoint":"http://localhost:8080/realms/test-realm/authz/protection/resource_set","permission_endpoint":"http://localhost:8080/realms/test-realm/authz/protection/permission","policy_endpoint":"http://localhost:8080/realms/test-realm/authz/protection/uma-policy"}'
    headers:
      Cache-Control:
      - no-cache, must-revalidate, no-transform, no-store
      Content-Length:
      - "1842"
      Content-Type:
      - application/json
      Referrer-Policy:
      - no-referrer
      Strict-Transport-Security:
      - max-age=31536000; includeSubDomains
      X-Content-Type-Options:
      - nosniff
      X-Frame-Options:
      - SAMEORIGIN
      X-Xss-Protection:
      - 1; mode=block
    status: 200 OK
    code: 200
    duration: 15.952749ms
- request:
    body: client_id=test-client&client_secret=change-me&grant_type=client_credentials
    form:
      client_id:
      - test-client
      client_secret:
      - change-me
      grant_type:
      - client_credentials
    headers:
      Content-Type:
      - application/x-www-form-urlencoded
    url: http://localhost:8080/realms/test-realm/protocol/openid-connect/token
    method: POST
  response:
    body: '{"access_token":"eyJhbGciOiJSUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICJoNmRZQmt0dWxkaDZtT3AwTGR4NWpQS2tKcUx5c0ptMzdvSGlOVTBteHU4In0.eyJleHAiOjE2NjE0NzkzMTcsImlhdCI6MTY2MTQ3OTAxNywianRpIjoiYTgwOTA2NTAtODM2Mi00OGJlLWI1MWItOGRkNTc3Y2MzMjg5IiwiaXNzIjoiaHR0cDovL2xvY2FsaG9zdDo4MDgwL3JlYWxtcy90ZXN0LXJlYWxtIiwiYXVkIjoiYWNjb3VudCIsInN1YiI6ImExY2Q3YjdhLTIwNzQtNGYzZS05MTY2LWVkZjNlYmI4OTc1NCIsInR5cCI6IkJlYXJlciIsImF6cCI6InRlc3QtY2xpZW50IiwiYWNyIjoiMSIsInJlYWxtX2FjY2VzcyI6eyJyb2xlcyI6WyJkZWZhdWx0LXJvbGVzLXRlc3QtcmVhbG0iLCJvZmZsaW5lX2FjY2VzcyIsInVtYV9hdXRob3JpemF0aW9uIl19LCJyZXNvdXJjZV9hY2Nlc3MiOnsidGVzdC1jbGllbnQiOnsicm9sZXMiOlsidW1hX3Byb3RlY3Rpb24iXX0sImFjY291bnQiOnsicm9sZXMiOlsibWFuYWdlLWFjY291bnQiLCJtYW5hZ2UtYWNjb3VudC1saW5rcyIsInZpZXctcHJvZmlsZSJdfX0sInNjb3BlIjoiZW1haWwgcHJvZmlsZSIsImNsaWVudEhvc3QiOiIxNzIuMzAuMC4xIiwiZW1haWxfdmVyaWZpZWQiOmZhbHNlLCJjbGllbnRJZCI6InRlc3QtY2xpZW50IiwicHJlZmVycmVkX3VzZXJuYW1lIjoic2VydmljZS1hY2NvdW50LXRlc3QtY2xpZW50IiwiY2xpZW50QWRkcmVzcyI6IjE3Mi4zMC4wLjEifQ.PPN6k4I059lG0kwpg731VJq4Y_MSSKWFCW0awG4yJyiikPX9Ff5SCBFJXmMbMXWDGRVmL6q-wMf5i98v7A3PIjnsqD9IQG2djivn5wU_huyDh-hMS-goIqjChPeeXAJ3am1hmYfGgDOYgEgpj5kE51AGNdkUNnOA1g0hC2QI6P0Iqc2Oh5RiZtU7xPeqJbjRz0Klt6Ubdi5t3bAacx7t2nGzpJZnx0w4_LS9w7xFMo5u62bkRfBz-zAoJ9FjkPIaOsbdM0hQ4zc1AFXMgTaT0WO7zINxo3F5G5sxUEswxl6h5OgLhGc3qa0a1vrSDZNF7tQlKqTmm7U88LEOc4Lq5w","expires_in":300,"refresh_expires_in":0,"token_type":"Bearer","not-before-policy":0,"scope":"email
      profile"}'
    headers:
      Cache-Control:
      - no-store
      Content-Length:
      - "1440"
      Content-Type:
      - application/json
      Pragma:
      - no-cache
      Referrer-Policy:
      - no-referrer
      Set-Cookie:
      - KC_RESTART=; Version=1; Expires=Thu, 01-Jan-1970 00:00:10 GMT; Max-Age=0;
        Path=/realms/test-realm/; HttpOnly
      Strict-Transport-Security:
      - max-age=31536000; includeSubDomains
      X-Content-Type-Options:
      - nosniff
      X-Frame-Options:
      - SAMEORIGIN
      X-Xss-Protection:
      - 1; mode=block
    status: 200 OK
    code: 200
    duration: 370.163436ms
- request:
    body: '{"type":"https://www.example.com/rsrcs/users","icon_uri":"https://www.example.com/rsrcs/users/icon.png","resource_scopes":["read","write"],"name":"Users","ownerManagedAccess":true,"uri":"http://localhost:53746/base/users"}'
    form: {}
    headers:
      Authorization:
      - Bearer eyJhbGciOiJSUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICJoNmRZQmt0dWxkaDZtT3AwTGR4NWpQS2tKcUx5c0ptMzdvSGlOVTBteHU4In0.eyJleHAiOjE2NjE0NzkzMTcsImlhdCI6MTY2MTQ3OTAxNywianRpIjoiYTgwOTA2NTAtODM2Mi00OGJlLWI1MWItOGRkNTc3Y2MzMjg5IiwiaXNzIjoiaHR0cDovL2xvY2FsaG9zdDo4MDgwL3JlYWxtcy90ZXN0LXJlYWxtIiwiYXVkIjoiYWNjb3VudCIsInN1YiI6ImExY2Q3YjdhLTIwNzQtNGYzZS05MTY2LWVkZjNlYmI4OTc1NCIsInR5cCI6IkJlYXJlciIsImF6cCI6InRlc3QtY2xpZW50IiwiYWNyIjoiMSIsInJlYWxtX2FjY2VzcyI6eyJyb2xlcyI6WyJkZWZhdWx0LXJvbGVzLXRlc3QtcmVhbG0iLCJvZmZsaW5lX2FjY2VzcyIsInVtYV9hdXRob3JpemF0aW9uIl19LCJyZXNvdXJjZV9hY2Nlc3MiOnsidGVzdC1jbGllbnQiOnsicm9sZXMiOlsidW1hX3Byb3RlY3Rpb24iXX0sImFjY291bnQiOnsicm9sZXMiOlsibWFuYWdlLWFjY291bnQiLCJtYW5hZ2UtYWNjb3VudC1saW5rcyIsInZpZXctcHJvZmlsZSJdfX0sInNjb3BlIjoiZW1haWwgcHJvZmlsZSIsImNsaWVudEhvc3QiOiIxNzIuMzAuMC4xIiwiZW1haWxfdmVyaWZpZWQiOmZhbHNlLCJjbGllbnRJZCI6InRlc3QtY2xpZW50IiwicHJlZmVycmVkX3VzZXJuYW1lIjoic2VydmljZS1hY2NvdW50LXRlc3QtY2xpZW50IiwiY2xpZW50QWRkcmVzcyI6IjE3Mi4zMC4wLjEifQ.PPN6k4I059lG0kwpg731VJq4Y_MSSKWFCW0awG4yJyiikPX9Ff5SCBFJXmMbMXWDGRVmL6q-wMf5i98v7A3PIjnsqD9IQG2djivn5wU_huyDh-hMS-goIqjChPeeXAJ3am1hmYfGgDOYgEgpj5kE51AGNdkUNnOA1g0hC2QI6P0Iqc2Oh5RiZtU7xPeqJbjRz0Klt6Ubdi5t3bAacx7t2nGzpJZnx0w4_LS9w7xFMo5u62bkRfBz-zAoJ9FjkPIaOsbdM0hQ4zc1AFXMgTaT0WO7zINxo3F5G5sxUEswxl6h5OgLhGc3qa0a1vrSDZNF7tQlKqTmm7U88LEOc4Lq5w
      Content-Type:
      - application/json
    url: http://localhost:8080/realms/test-realm/authz/protection/resource_set
    method: POST
  response:
    body: '{"name":"Users","type":"https://www.example.com/rsrcs/users","owner":{"id":"bf93754f-2719-4c06-a2da-d1e95c5b9e54","name":"test-client"},"ownerManagedAccess":true,"_id":"edcd0243-ba57-452e-b97e-0f06c685fb03","uris":["http://localhost:53746/base/users"],"resource_scopes":[{"id":"c0b1ac64-1ac4-41a8-8da9-61f765106bd1","name":"read"},{"id":"ddf80587-ed8f-400d-bb3a-70a881fc7f87","name":"write"}],"scopes":[{"id":"c0b1ac64-1ac4-41a8-8da9-61f765106bd1","name":"read"},{"id":"ddf80587-ed8f-400d-bb3a-70a881fc7f87","name":"write"}],"icon_uri":"https://www.example.com/rsrcs/users/icon.png"}'
    headers:
      Content-Length:
      - "583"
      Content-Type:
      - application/json
      Referrer-Policy:
      - no-referrer
      Strict-Transport-Security:
      - max-age=31536000; includeSubDomains
      X-Content-Type-Options:
      - nosniff
      X-Frame-Options:
      - SAMEORIGIN
      X-Xss-Protection:
      - 1; mode=block
    status: 201 Created
    code: 201
    duration: 139.852642ms
- request:
    body: '{"type":"https://www.example.com/rsrcs/user","icon_uri":"https://www.example.com/rsrcs/user/icon.png","resource_scopes":["read","write"],"name":"User
      1","ownerManagedAccess":true,"uri":"http://localhost:53746/base/users/1"}'
    form: {}
    headers:
      Authorization:
      - Bearer eyJhbGciOiJSUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICJoNmRZQmt0dWxkaDZtT3AwTGR4NWpQS2tKcUx5c0ptMzdvSGlOVTBteHU4In0.eyJleHAiOjE2NjE0NzkzMTcsImlhdCI6MTY2MTQ3OTAxNywianRpIjoiYTgwOTA2NTAtODM2Mi00OGJlLWI1MWItOGRkNTc3Y2MzMjg5IiwiaXNzIjoiaHR0cDovL2xvY2FsaG9zdDo4MDgwL3JlYWxtcy90ZXN0LXJlYWxtIiwiYXVkIjoiYWNjb3VudCIsInN1YiI6ImExY2Q3YjdhLTIwNzQtNGYzZS05MTY2LWVkZjNlYmI4OTc1NCIsInR5cCI6IkJlYXJlciIsImF6cCI6InRlc3QtY2xpZW50IiwiYWNyIjoiMSIsInJlYWxtX2FjY2VzcyI6eyJyb2xlcyI6WyJkZWZhdWx0LXJvbGVzLXRlc3QtcmVhbG0iLCJvZmZsaW5lX2FjY2VzcyIsInVtYV9hdXRob3JpemF0aW9uIl19LCJyZXNvdXJjZV9hY2Nlc3MiOnsidGVzdC1jbGllbnQiOnsicm9sZXMiOlsidW1hX3Byb3RlY3Rpb24iXX0sImFjY291bnQiOnsicm9sZXMiOlsibWFuYWdlLWFjY291bnQiLCJtYW5hZ2UtYWNjb3VudC1saW5rcyIsInZpZXctcHJvZmlsZSJdfX0sInNjb3BlIjoiZW1haWwgcHJvZmlsZSIsImNsaWVudEhvc3QiOiIxNzIuMzAuMC4xIiwiZW1haWxfdmVyaWZpZWQiOmZhbHNlLCJjbGllbnRJZCI6InRlc3QtY2xpZW50IiwicHJlZmVycmVkX3VzZXJuYW1lIjoic2VydmljZS1hY2NvdW50LXRlc3QtY2xpZW50IiwiY2xpZW50QWRkcmVzcyI6IjE3Mi4zMC4wLjEifQ.PPN6k4I059lG0kwpg731VJq4Y_MSSKWFCW0awG4yJyiikPX9Ff5SCBFJXmMbMXWDGRVmL6q-wMf5i98v7A3PIjnsqD9IQG2djivn5wU_huyDh-hMS-goIqjChPeeXAJ3am1hmYfGgDOYgEgpj5kE51AGNdkUNnOA1g0hC2QI6P0Iqc2Oh5RiZtU7xPeqJbjRz0Klt6Ubdi5t3bAacx7t2nGzpJZnx0w4_LS9w7xFMo5u62bkRfBz-zAoJ9FjkPIaOsbdM0hQ4zc1AFXMgTaT0WO7zINxo3F5G5sxUEswxl6h5OgLhGc3qa0a1vrSDZNF7tQlKqTmm7U88LEOc4Lq5w
      Content-Type:
      - application/json
    url: http://localhost:8080/realms/test-realm/authz/protection/resource_set
    method: POST
  response:
    body: '{"name":"User 1","type":"https://www.example.com/rsrcs/user","owner":{"id":"bf93754f-2719-4c06-a2da-d1e95c5b9e54","name":"test-client"},"ownerManagedAccess":true,"_id":"4ad3fa4a-75aa-4acf-96d1-91db48b747b0","uris":["http://localhost:53746/base/users/1"],"resource_scopes":[{"id":"c0b1ac64-1ac4-41a8-8da9-61f765106bd1","name":"read"},{"id":"ddf80587-ed8f-400d-bb3a-70a881fc7f87","name":"write"}],"scopes":[{"id":"c0b1ac64-1ac4-41a8-8da9-61f765106bd1","name":"read"},{"id":"ddf80587-ed8f-400d-bb3a-70a881fc7f87","name":"write"}],"icon_uri":"https://www.example.com/rsrcs/user/icon.png"}'
    headers:
      Content-Length:
      - "584"
      Content-Type:
      - application/json
      Referrer-Policy:
      - no-referrer
      Strict-Transport-Security:
      - max-age=31536000; includeSubDomains
      X-Content-Type-Options:
      - nosniff
      X-Frame-Options:
      - SAMEORIGIN
      X-Xss-Protection:
      - 1; mode=block
    status: 201 Created
    code: 201
    duration: 25.16878ms
- request:
    body: '[{"resource_id":"edcd0243-ba57-452e-b97e-0f06c685fb03","resource_scopes":null}]'
    form: {}
    headers:
      Authorization:
      - Bearer eyJhbGciOiJSUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICJoNmRZQmt0dWxkaDZtT3AwTGR4NWpQS2tKcUx5c0ptMzdvSGlOVTBteHU4In0.eyJleHAiOjE2NjE0NzkzMTcsImlhdCI6MTY2MTQ3OTAxNywianRpIjoiYTgwOTA2NTAtODM2Mi00OGJlLWI1MWItOGRkNTc3Y2MzMjg5IiwiaXNzIjoiaHR0cDovL2xvY2FsaG9zdDo4MDgwL3JlYWxtcy90ZXN0LXJlYWxtIiwiYXVkIjoiYWNjb3VudCIsInN1YiI6ImExY2Q3YjdhLTIwNzQtNGYzZS05MTY2LWVkZjNlYmI4OTc1NCIsInR5cCI6IkJlYXJlciIsImF6cCI6InRlc3QtY2xpZW50IiwiYWNyIjoiMSIsInJlYWxtX2FjY2VzcyI6eyJyb2xlcyI6WyJkZWZhdWx0LXJvbGVzLXRlc3QtcmVhbG0iLCJvZmZsaW5lX2FjY2VzcyIsInVtYV9hdXRob3JpemF0aW9uIl19LCJyZXNvdXJjZV9hY2Nlc3MiOnsidGVzdC1jbGllbnQiOnsicm9sZXMiOlsidW1hX3Byb3RlY3Rpb24iXX0sImFjY291bnQiOnsicm9sZXMiOlsibWFuYWdlLWFjY291bnQiLCJtYW5hZ2UtYWNjb3VudC1saW5rcyIsInZpZXctcHJvZmlsZSJdfX0sInNjb3BlIjoiZW1haWwgcHJvZmlsZSIsImNsaWVudEhvc3QiOiIxNzIuMzAuMC4xIiwiZW1haWxfdmVyaWZpZWQiOmZhbHNlLCJjbGllbnRJZCI6InRlc3QtY2xpZW50IiwicHJlZmVycmVkX3VzZXJuYW1lIjoic2VydmljZS1hY2NvdW50LXRlc3QtY2xpZW50IiwiY2xpZW50QWRkcmVzcyI6IjE3Mi4zMC4wLjEifQ.PPN6k4I059lG0kwpg731VJq4Y_MSSKWFCW0awG4yJyiikPX9Ff5SCBFJXmMbMXWDGRVmL6q-wMf5i98v7A3PIjnsqD9IQG2djivn5wU_huyDh-hMS-goIqjChPeeXAJ3am1hmYfGgDOYgEgpj5kE51AGNdkUNnOA1g0hC2QI6P0Iqc2Oh5RiZtU7xPeqJbjRz0Klt6Ubdi5t3bAacx7t2nGzpJZnx0w4_LS9w7xFMo5u62bkRfBz-zAoJ9FjkPIaOsbdM0hQ4zc1AFXMgTaT0WO7zINxo3F5G5sxUEswxl6h5OgLhGc3qa0a1vrSDZNF7tQlKqTmm7U88LEOc4Lq5w
      Content-Type:
      - application/json
    url: http://localhost:8080/realms/test-realm/authz/protection/permission
    method: POST
  response:
    body: '{"ticket":"eyJhbGciOiJIUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICIxNzQxYmIxNi00NzdlLTRmZjMtOWFkNi04ZDljZjgyMjdiNmQifQ.eyJleHAiOjE2NjE0NzkzMTcsIm5iZiI6MCwiaWF0IjoxNjYxNDc5MDE3LCJwZXJtaXNzaW9ucyI6W3sicnNpZCI6ImVkY2QwMjQzLWJhNTctNDUyZS1iOTdlLTBmMDZjNjg1ZmIwMyJ9XSwianRpIjoiNTg0YjdkNWItMTRmOC00MTU5LThlMjUtNThlMmM5ZTAyMjM2LTE2NjE0NzkwMTgxNjQiLCJhdWQiOiJodHRwOi8vbG9jYWxob3N0OjgwODAvcmVhbG1zL3Rlc3QtcmVhbG0iLCJzdWIiOiJhMWNkN2I3YS0yMDc0LTRmM2UtOTE2Ni1lZGYzZWJiODk3NTQiLCJhenAiOiJ0ZXN0LWNsaWVudCJ9.lHe-i4Xeyi-2KO9K0esa9UZlcfmi5dpyy2YHsZFtwfc"}'
    headers:
      Content-Length:
      - "532"
      Content-Type:
      - application/json
      Referrer-Policy:
      - no-referrer
      Strict-Transport-Security:
      - max-age=31536000; includeSubDomains
      X-Content-Type-Options:
      - nosniff
      X-Frame-Options:
      - SAMEORIGIN
      X-Xss-Protection:
      - 1; mode=block
    status: 201 Created
    code: 201
    duration: 23.715835ms
